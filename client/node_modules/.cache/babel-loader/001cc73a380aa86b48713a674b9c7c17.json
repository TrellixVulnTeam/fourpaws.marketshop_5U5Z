{"ast":null,"code":"'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _gisMaps = require('2gis-maps');\n\nvar _gisMaps2 = _interopRequireDefault(_gisMaps);\n\nvar _MapComponent2 = require('./MapComponent');\n\nvar _MapComponent3 = _interopRequireDefault(_MapComponent2);\n\nvar Marker = function (_MapComponent) {\n  _inherits(Marker, _MapComponent);\n\n  function Marker() {\n    var _this = this;\n\n    _classCallCheck(this, Marker);\n\n    _get(Object.getPrototypeOf(Marker.prototype), 'constructor', this).apply(this, arguments);\n\n    this.state = {\n      dgElement: null,\n      childrenForRender: [],\n      pos: this.props.pos || null\n    };\n\n    this.dragging = function (e) {\n      _this.setState({\n        dgElement: _this.state.dgElement,\n        childrenForRender: _this.state.childrenForRender,\n        pos: e.latlng\n      });\n    };\n  }\n\n  _createClass(Marker, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var dgElement = _gisMaps2['default'].marker(this.props.pos, {\n        draggable: this.props.draggable,\n        clickable: this.props.clickable\n      });\n\n      if (this.props.label) {\n        dgElement.bindLabel(this.props.label);\n      }\n\n      this.setState({\n        dgElement: dgElement\n      }, function () {\n        // For dragging Marker.\n        if (_this2.props.draggable) {\n          _this2.draggingSwitchTo(true);\n        }\n      });\n      this.bindEvents(dgElement); // todo: fix it after fix https://github.com/2gis/mapsapi/issues/332\n\n      if (this.props.staticLabel) {\n        this.props.element.addLayer(dgElement);\n        dgElement.bindLabel(this.props.staticLabel, {\n          'static': true\n        });\n      } else {\n        this.props.element.addLayer(dgElement);\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var dgElement = this.state.dgElement;\n      this.updatePos(prevProps);\n      this.updateLabel(prevProps); // Update static label.\n\n      if (this.checkPropsChange('staticLabel', prevProps)) {\n        dgElement.bindLabel(this.props.staticLabel, {\n          'static': true\n        });\n      } // Update draggable.\n\n\n      if (this.checkPropsChange('draggable', prevProps)) {\n        this.draggingSwitchTo(this.props.draggable);\n      }\n\n      this.updateEvents(dgElement, prevProps);\n    }\n  }, {\n    key: 'draggingSwitchTo',\n    value: function draggingSwitchTo(isEnable) {\n      var dgElement = this.state.dgElement;\n\n      if (isEnable) {\n        dgElement.on('drag', this.dragging);\n        dgElement.dragging.enable();\n      } else {\n        dgElement.off('drag', this.dragging);\n        dgElement.dragging.disable();\n        dgElement.setLatLng(this.state.pos);\n      }\n    }\n  }], [{\n    key: 'propsTypes',\n    value: {\n      pos: _react.PropTypes.array,\n      label: _react.PropTypes.string,\n      staticLabel: _react.PropTypes.string,\n      draggable: _react.PropTypes.bool,\n      clickable: _react.PropTypes.bool\n    },\n    enumerable: true\n  }, {\n    key: 'defaultProps',\n    value: {\n      draggable: false,\n      clickable: true,\n      label: false,\n      staticLabel: false\n    },\n    enumerable: true\n  }]);\n\n  return Marker;\n}(_MapComponent3['default']);\n\nexports['default'] = Marker;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/macbook/Desktop/ReactJs/dogcat/node_modules/2gis-maps-react/lib/Marker.js"],"names":["_get","require","_inherits","_createClass","_classCallCheck","_interopRequireDefault","Object","defineProperty","exports","value","_react","_react2","_gisMaps","_gisMaps2","_MapComponent2","_MapComponent3","Marker","_MapComponent","_this","getPrototypeOf","prototype","apply","arguments","state","dgElement","childrenForRender","pos","props","dragging","e","setState","latlng","key","componentDidMount","_this2","marker","draggable","clickable","label","bindLabel","draggingSwitchTo","bindEvents","staticLabel","element","addLayer","componentDidUpdate","prevProps","updatePos","updateLabel","checkPropsChange","updateEvents","isEnable","on","enable","off","disable","setLatLng","PropTypes","array","string","bool","enumerable","module"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _gisMaps = require('2gis-maps');\n\nvar _gisMaps2 = _interopRequireDefault(_gisMaps);\n\nvar _MapComponent2 = require('./MapComponent');\n\nvar _MapComponent3 = _interopRequireDefault(_MapComponent2);\n\nvar Marker = (function (_MapComponent) {\n    _inherits(Marker, _MapComponent);\n\n    function Marker() {\n        var _this = this;\n\n        _classCallCheck(this, Marker);\n\n        _get(Object.getPrototypeOf(Marker.prototype), 'constructor', this).apply(this, arguments);\n\n        this.state = {\n            dgElement: null,\n            childrenForRender: [],\n            pos: this.props.pos || null\n        };\n\n        this.dragging = function (e) {\n            _this.setState({\n                dgElement: _this.state.dgElement,\n                childrenForRender: _this.state.childrenForRender,\n                pos: e.latlng\n            });\n        };\n    }\n\n    _createClass(Marker, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            var dgElement = _gisMaps2['default'].marker(this.props.pos, {\n                draggable: this.props.draggable,\n                clickable: this.props.clickable\n            });\n\n            if (this.props.label) {\n                dgElement.bindLabel(this.props.label);\n            }\n\n            this.setState({\n                dgElement: dgElement\n            }, function () {\n                // For dragging Marker.\n                if (_this2.props.draggable) {\n                    _this2.draggingSwitchTo(true);\n                }\n            });\n\n            this.bindEvents(dgElement);\n\n            // todo: fix it after fix https://github.com/2gis/mapsapi/issues/332\n            if (this.props.staticLabel) {\n                this.props.element.addLayer(dgElement);\n\n                dgElement.bindLabel(this.props.staticLabel, { 'static': true });\n            } else {\n                this.props.element.addLayer(dgElement);\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var dgElement = this.state.dgElement;\n\n            this.updatePos(prevProps);\n\n            this.updateLabel(prevProps);\n\n            // Update static label.\n            if (this.checkPropsChange('staticLabel', prevProps)) {\n                dgElement.bindLabel(this.props.staticLabel, { 'static': true });\n            }\n\n            // Update draggable.\n            if (this.checkPropsChange('draggable', prevProps)) {\n                this.draggingSwitchTo(this.props.draggable);\n            }\n\n            this.updateEvents(dgElement, prevProps);\n        }\n    }, {\n        key: 'draggingSwitchTo',\n        value: function draggingSwitchTo(isEnable) {\n            var dgElement = this.state.dgElement;\n\n            if (isEnable) {\n                dgElement.on('drag', this.dragging);\n                dgElement.dragging.enable();\n            } else {\n                dgElement.off('drag', this.dragging);\n                dgElement.dragging.disable();\n                dgElement.setLatLng(this.state.pos);\n            }\n        }\n    }], [{\n        key: 'propsTypes',\n        value: {\n            pos: _react.PropTypes.array,\n            label: _react.PropTypes.string,\n            staticLabel: _react.PropTypes.string,\n            draggable: _react.PropTypes.bool,\n            clickable: _react.PropTypes.bool\n        },\n        enumerable: true\n    }, {\n        key: 'defaultProps',\n        value: {\n            draggable: false,\n            clickable: true,\n            label: false,\n            staticLabel: false\n        },\n        enumerable: true\n    }]);\n\n    return Marker;\n})(_MapComponent3['default']);\n\nexports['default'] = Marker;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}